
<html>
	
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Conversiones</title>
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
	</head>
	<body>	
		<div class="row">
			<div class="col-md-12">

				<div class="card" style="width: 18rem;">
					<div class="card-header">
						Conversiones
					</div>
					
					<form>
						<fieldset>
							<legend>YIQ TO RGB:</legend>
							<div class="mb-3">
								<label for="y_to_convert" class="form-label">Y</label>
								<input type="text" class="form-control" id="y_to_convert">
							</div>
							<div class="mb-3">
								<label for="i_to_convert" class="form-label">I</label>
								<input type="text" class="form-control" id="i_to_convert">
							</div>
							<div class="mb-3">
								<label for="q_to_convert" class="form-label">Q</label>
								<input type="text" class="form-control" id="q_to_convert">
							</div>
							<div class="mb-3">
								<label for="result_yiq_to_rgb" class="form-label">RGB</label>
								<input type="text" class="form-control" id="result_yiq_to_rgb">
							</div>

							<div class="mb-3">
								<label for="color_result_yiq_to_rgb" class="form-label">Colo result:</label>
								<input type="text" class="form-control" id="color_result_yiq_to_rgb">
							</div>
							<button type="button" class="btn btn-primary"  onclick="yiq2rgb(parseFloat(document.getElementById('y_to_convert').value),parseFloat(document.getElementById('y_to_convert').value), parseFloat(document.getElementById('q_to_convert').value))">Convertir</button>
						</fieldset>
					</form>
					
					<form>
						<fieldset>
							<legend>RGB TO YIQ</legend>
								<div class="mb-3">
									<label for="R_to_convert_RGB_TO_YIQ" class="form-label">R</label>
									<input type="text" class="form-control" id="R_to_convert_RGB_TO_YIQ">
								</div>

								<div class="mb-3">
									<label for="G_to_convert_RGB_TO_YIQ" class="form-label">G</label>
									<input type="text" class="form-control" id="G_to_convert_RGB_TO_YIQ">
								</div>

								<div class="mb-3">
									<label for="B_to_convert_RGB_TO_YIQ" class="form-label">B</label>
									<input type="text" class="form-control" id="B_to_convert_RGB_TO_YIQ">
								</div>

								<div class="mb-3">
									<label for="result_RGB_TO_YIQ" class="form-label">YIQ</label>
									<input type="text" class="form-control" id="result_RGB_TO_YIQ">
								</div>
	
								<div class="mb-3">
									<label for="color_result_RGB_TO_YIQ" class="form-label">Colo result:</label>
									<input type="text" class="form-control" id="color_result_RGB_TO_YIQ">
								</div>

								<button type="button" class="btn btn-primary"  onclick="rgb2yiq(parseFloat(document.getElementById('R_to_convert_RGB_TO_YIQ').value),parseFloat(document.getElementById('G_to_convert_RGB_TO_YIQ').value), parseFloat(document.getElementById('B_to_convert_RGB_TO_YIQ').value))">Convertir</button>
						</fieldset>
					</form>
					
					<form>
						<fieldset>
							<legend>HSV TO RGB</legend>
							<div class="mb-3">
								<label for="H_to_convert_HSV_TO_RGB" class="form-label">H</label>
								<input type="text" class="form-control" id="H_to_convert_HSV_TO_RGB">
							</div>

							<div class="mb-3">
								<label for="S_to_convert_HSV_TO_RGB" class="form-label">S</label>
								<input type="text" class="form-control" id="S_to_convert_HSV_TO_RGB">
							</div>

							<div class="mb-3">
								<label for="V_to_convert_HSV_TO_RGB" class="form-label">V</label>
								<input type="text" class="form-control" id="V_to_convert_HSV_TO_RGB">
							</div>

							<div class="mb-3">
								<label for="result_HSV_TO_RGB" class="form-label">RGB</label>
								<input type="text" class="form-control" id="result_HSV_TO_RGB">
							</div>

							<div class="mb-3">
								<label for="color_result_HSV_TO_RGB" class="form-label">Colo result:</label>
								<input type="text" class="form-control" id="color_result_HSV_TO_RGB">
							</div>
							<button type="button" class="btn btn-primary"  onclick="hsb2rgb(parseFloat(document.getElementById('H_to_convert_HSV_TO_RGB').value),parseFloat(document.getElementById('S_to_convert_HSV_TO_RGB').value), parseFloat(document.getElementById('V_to_convert_HSV_TO_RGB').value))">Convertir</button>			
						</fieldset>
					</form>
					
					<form>
						<fieldset>
							<legend>RGB TO HSV</legend>
							<div class="mb-3">
								<label for="R_to_convert_RGB_TO_HSV" class="form-label">R</label>
								<input type="text" class="form-control" id="R_to_convert_RGB_TO_HSV">
							</div>

							<div class="mb-3">
								<label for="G_to_convert_RGB_TO_HSV" class="form-label">G</label>
								<input type="text" class="form-control" id="G_to_convert_RGB_TO_HSV">
							</div>

							<div class="mb-3">
								<label for="B_to_convert_RGB_TO_HSV" class="form-label">B</label>
								<input type="text" class="form-control" id="B_to_convert_RGB_TO_HSV">
							</div>

							<div class="mb-3">
								<label for="result_RGB_TO_HSV" class="form-label">HSV</label>
								<input type="text" class="form-control" id="result_RGB_TO_HSV">
							</div>

							<div class="mb-3">
								<label for="color_result_RGB_TO_HSV" class="form-label">Colo result:</label>
								<input type="text" class="form-control" id="color_result_RGB_TO_HSV">
							</div>

							<button type="button" class="btn btn-primary"  onclick="rgbhsv(parseFloat(document.getElementById('R_to_convert_RGB_TO_HSV').value),parseFloat(document.getElementById('G_to_convert_RGB_TO_HSV').value), parseFloat(document.getElementById('B_to_convert_RGB_TO_HSV').value))">Convertir</button>			
						</fieldset>
					</form>
					
					<form>
						<fieldset>
						<legend>HSL TO RGB</legend>
							<div class="mb-3">
								<label for="H_to_convert_HSL_TO_RGB" class="form-label">H</label>
								<input type="text" class="form-control" id="H_to_convert_HSL_TO_RGB">
							</div>

							<div class="mb-3">
								<label for="S_to_convert_HSL_TO_RGB" class="form-label">S</label>
								<input type="text" class="form-control" id="S_to_convert_HSL_TO_RGB">
							</div>

							<div class="mb-3">
								<label for="L_to_convert_HSL_TO_RGB" class="form-label">L</label>
								<input type="text" class="form-control" id="L_to_convert_HSL_TO_RGB">
							</div>

							<div class="mb-3">
								<label for="result_HSL_TO_RGB" class="form-label">RGB</label>
								<input type="text" class="form-control" id="result_HSL_TO_RGB">
							</div>

							<div class="mb-3">
								<label for="color_result_HSL_TO_RGB" class="form-label">Colo result:</label>
								<input type="text" class="form-control" id="color_result_HSL_TO_RGB">
							</div>

							<button type="button" class="btn btn-primary"  onclick="HSLToRGB(parseFloat(document.getElementById('H_to_convert_HSL_TO_RGB').value),parseFloat(document.getElementById('S_to_convert_HSL_TO_RGB').value), parseFloat(document.getElementById('L_to_convert_HSL_TO_RGB').value))">Convertir</button>			
					</fieldset>
				</form>
				
				<form>
					<fieldset>
						<legend>RGB TO HSL</legend>
							<div class="mb-3">
								<label for="R_to_convert_RGB_TO_HSL" class="form-label">R</label>
								<input type="text" class="form-control" id="R_to_convert_RGB_TO_HSL">
							</div>

							<div class="mb-3">
								<label for="G_to_convert_RGB_TO_HSL" class="form-label">G</label>
								<input type="text" class="form-control" id="G_to_convert_RGB_TO_HSL">
							</div>

							<div class="mb-3">
								<label for="B_to_convert_RGB_TO_HSL" class="form-label">B</label>
								<input type="text" class="form-control" id="B_to_convert_RGB_TO_HSL">
							</div>

							<div class="mb-3">
								<label for="result_RGB_TO_HSL" class="form-label">HSL</label>
								<input type="text" class="form-control" id="result_RGB_TO_HSL">
							</div>

							<div class="mb-3">
								<label for="color_result_RGB_TO_HSL" class="form-label">Colo result:</label>
								<input type="text" class="form-control" id="color_result_RGB_TO_HSL">
							</div>

							<button type="button" class="btn btn-primary"  onclick="RGBToHSL(parseFloat(document.getElementById('R_to_convert_RGB_TO_HSL').value),parseFloat(document.getElementById('G_to_convert_RGB_TO_HSL').value), parseFloat(document.getElementById('B_to_convert_RGB_TO_HSL').value))">Convertir</button>			
					</fieldset>
				</form>
				
			</div>
			</div>
		</div>

		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>
		<script type="text/javascript">
		var round = Math.round
			/*
			[ Y ]     [ 0.299   0.587   0.114 ] [ R ]
			[ I ]  =  [ 0.596  -0.275  -0.321 ] [ G ]
			[ Q ]     [ 0.212  -0.523   0.311 ] [ B ]
			*/
		function rgb2yiq(r,g,b){
		// matrix transform
			var y = ((0.299 * r) + ( 0.587 * g) + ( 0.114 * b)) / 255;
			var i = ((0.596 * r) + (-0.275 * g) + (-0.321 * b)) / 255;
			var q = ((0.212 * r) + (-0.523 * g) + ( 0.311 * b)) / 255;
			//return [y,i,q];			
			document.getElementById("result_RGB_TO_YIQ").value = "("+y+", "+i+", "+q+")";
			document.getElementById("color_result_RGB_TO_YIQ").style.background = "rgba("+r+", "+g+", "+b+", 1)";
		}

			/*
				[ R ]     [ 1   0.956   0.621 ] [ Y ]
				[ G ]  =  [ 1  -0.272  -0.647 ] [ I ]
				[ B ]     [ 1  -1.105   1.702 ] [ Q ]
			*/
		function yiq2rgb(y,i,q){
			console.log("Entro"+y+"-"+i);
			console.log("Prueba de operaci√≥n "+y*i);
				// matrix transform
				var r = (y + ( 0.956 * i) + ( 0.621 * q)) * 255;
				var g = (y + (-0.272 * i) + (-0.647 * q)) * 255;
				var b = (y + (-1.105 * i) + ( 1.702 * q)) * 255;
				// bounds-checking
				if (r < 0){ r=0; } else if (r > 255){ r = 255};
				if (g < 0){ g=0; } else if (g > 255){ g = 255};
				if (b < 0){ b=0; } else if (b > 255){ b = 255};
				//return [r, g, b];
		
			document.getElementById("result_yiq_to_rgb").value = "("+r+", "+g+", "+b+")";
			document.getElementById("color_result_yiq_to_rgb").style.background = "rgba("+r+", "+g+", "+b+", 1)";
			
		}

		function hsb2rgb(hue, saturation, value) {
			hue = (parseInt(hue, 10) || 0) % 360;

			saturation = /%/.test(saturation)
				? parseInt(saturation, 10) / 100
				: parseFloat(saturation, 10);

			value = /%/.test(value)
				? parseInt(value, 10) / 100
				: parseFloat(value, 10);

			saturation = Math.max(0, Math.min(saturation, 1));
			value = Math.max(0, Math.min(value, 1));

			var rgb;
			if (saturation === 0) {
				return [
				Math.round(255 * value),
				Math.round(255 * value),
				Math.round(255 * value)
				];
			}

			var side = hue / 60;
			var chroma = value * saturation;
			var x = chroma * (1 - Math.abs(side % 2 - 1));
			var match = value - chroma;

			switch (Math.floor(side)) {
			case 0: rgb = [ chroma, x, 0 ]; break;
			case 1: rgb = [ x, chroma, 0 ]; break;
			case 2: rgb = [ 0, chroma, x ]; break;
			case 3: rgb = [ 0, x, chroma ]; break;
			case 4: rgb = [ x, 0, chroma ]; break;
			case 5: rgb = [ chroma, 0, x ]; break;
			default: rgb = [ 0, 0, 0 ];
			}

			rgb[0] = Math.round(255 * (rgb[0] + match));
			rgb[1] = Math.round(255 * (rgb[1] + match));
			rgb[2] = Math.round(255 * (rgb[2] + match));

			document.getElementById("result_HSV_TO_RGB").value = "("+rgb[0]+", "+rgb[1]+", "+rgb[2]+")";
			document.getElementById("color_result_HSV_TO_RGB").style.background = "rgba("+rgb[0]+", "+rgb[1]+", "+rgb[2]+", 1)";
			
	}

		function rgbhsv (r, g, b) {
		var h, s, v
		var max = Math.max(r, g, b)
		var min = Math.min(r, g, b)
		var delta = max - min

		// hue
		if (delta === 0) {
			h = 0
		} else if (r === max) {
			h = ((g-b) / delta) % 6
		} else if (g === max) {
			h = (b-r) / delta + 2
		} else if (b === max) {
			h = (r-g) / delta + 4
		}

		h = round(h*60)
		if (h < 0) h += 360

		// saturation
		s = round((max === 0 ? 0 : (delta / max)) * 100)

		// value
		v = round(max/255*100)

		//return [h, s, v]

		document.getElementById("result_RGB_TO_HSV").value = "("+h+", "+s+", "+v+")";
		document.getElementById("color_result_RGB_TO_HSV").style.background = "rgba("+r+", "+g+", "+b+", 1)";
	}

		function RGBToHSL(r,g,b) {
		// Make r, g, and b fractions of 1
		r /= 255;
		g /= 255;
		b /= 255;

		// Find greatest and smallest channel values
		let cmin = Math.min(r,g,b),
			cmax = Math.max(r,g,b),
			delta = cmax - cmin,
			h = 0,
			s = 0,
			l = 0;

		// Calculate hue
		// No difference
		if (delta == 0)
			h = 0;
		// Red is max
		else if (cmax == r)
			h = ((g - b) / delta) % 6;
		// Green is max
		else if (cmax == g)
			h = (b - r) / delta + 2;
		// Blue is max
		else
			h = (r - g) / delta + 4;

		h = Math.round(h * 60);
			
		// Make negative hues positive behind 360¬∞
		if (h < 0)
			h += 360;

		// Calculate lightness
		l = (cmax + cmin) / 2;

		// Calculate saturation
		s = delta == 0 ? 0 : delta / (1 - Math.abs(2 * l - 1));
			
		// Multiply l and s by 100
		s = +(s * 100).toFixed(1);
		l = +(l * 100).toFixed(1);

			//return "hsl(" + h + "," + s + "%," + l + "%)";

			//return [h, s, l]

			
		document.getElementById("result_RGB_TO_HSL").value = "("+h+", "+s+", "+l+")";
		document.getElementById("color_result_RGB_TO_HSL").style.background = "rgba("+r+", "+g+", "+b+", 1)";
	}

		function HSLToRGB(h,s,l) {
		// Must be fractions of 1
		s /= 100;
		l /= 100;

		let c = (1 - Math.abs(2 * l - 1)) * s,
		x = c * (1 - Math.abs((h / 60) % 2 - 1)),
		m = l - c/2,
		r = 0,
		g = 0,
		b = 0;

		if (0 <= h && h < 60) {
			r = c; g = x; b = 0;  
		} else if (60 <= h && h < 120) {
			r = x; g = c; b = 0;
		} else if (120 <= h && h < 180) {
			r = 0; g = c; b = x;
		} else if (180 <= h && h < 240) {
			r = 0; g = x; b = c;
		} else if (240 <= h && h < 300) {
			r = x; g = 0; b = c;
		} else if (300 <= h && h < 360) {
			r = c; g = 0; b = x;
		}
			r = Math.round((r + m) * 255);
			g = Math.round((g + m) * 255);
			b = Math.round((b + m) * 255);

		//return "rgb(" + r + "," + g + "," + b + ")";
		//return [r, g, b]
		
		document.getElementById("result_HSL_TO_RGB").value = "("+r+", "+g+", "+b+")";
		document.getElementById("color_result_HSL_TO_RGB").style.background = "rgba("+r+", "+g+", "+b+", 1)";
	}

		//document.body.innerHTML += 'yiq[0.427, -0.216, 0.023] = rgb' + JSON.stringify(yiq2rgb(0.427, -0.216, 0.023).map(Math.round), null,2);
		//document.body.innerHTML += '<br>rgb[60, 120, 180] = yiq' + JSON.stringify(rgb2yiq(60, 120, 180), null,2);

		//document.body.innerHTML += '<br>HSV[60, 120, 180] = RGB' + JSON.stringify(hsb2rgb(60, 120, 180), null,2);
		//document.body.innerHTML += '<br>RGB[255, 255, 0] = HSV' + JSON.stringify(rgbhsv(255, 255, 0), null,2);

		//document.body.innerHTML += '<br>RGB[160, 255, 50] = HSL' + JSON.stringify(RGBToHSL(160, 255, 50), null,2);
		//document.body.innerHTML += '<br>HSL[88, 59.80, 1o] = RGB' + JSON.stringify(HSLToRGB(88, 59.80, 10), null,2);

		//document.getElementById("yiq_to_rgb").onclick = function() {yiq2rgb($("#y_to_convert").val(), $("#i_to_convert").val(), $("#q_to_convert").val()).map(Math.round)};

		</script>
	</body>

</html>