
<html>
	<head>
		<title>CONVERSIONES</title>
	</head>

	<body>
		<script type="text/javascript">
		var round = Math.round
					/*
		[ Y ]     [ 0.299   0.587   0.114 ] [ R ]
		[ I ]  =  [ 0.596  -0.275  -0.321 ] [ G ]
		[ Q ]     [ 0.212  -0.523   0.311 ] [ B ]
		*/
		function rgb2yiq(r,g,b){
		// matrix transform
			var y = ((0.299 * r) + ( 0.587 * g) + ( 0.114 * b)) / 255;
			var i = ((0.596 * r) + (-0.275 * g) + (-0.321 * b)) / 255;
			var q = ((0.212 * r) + (-0.523 * g) + ( 0.311 * b)) / 255;
		return [y,i,q];
		}

		/*
		[ R ]     [ 1   0.956   0.621 ] [ Y ]
		[ G ]  =  [ 1  -0.272  -0.647 ] [ I ]
		[ B ]     [ 1  -1.105   1.702 ] [ Q ]
		*/
		function yiq2rgb(y,i,q){
		// matrix transform
			var r = (y + ( 0.956 * i) + ( 0.621 * q)) * 255;
			var g = (y + (-0.272 * i) + (-0.647 * q)) * 255;
			var b = (y + (-1.105 * i) + ( 1.702 * q)) * 255;
		// bounds-checking
			if (r < 0){ r=0; } else if (r > 255){ r = 255};
			if (g < 0){ g=0; } else if (g > 255){ g = 255};
			if (b < 0){ b=0; } else if (b > 255){ b = 255};
		return [r, g, b];
		}

		function hsb2rgb(hue, saturation, value) {
		hue = (parseInt(hue, 10) || 0) % 360;

		saturation = /%/.test(saturation)
			? parseInt(saturation, 10) / 100
			: parseFloat(saturation, 10);

		value = /%/.test(value)
			? parseInt(value, 10) / 100
			: parseFloat(value, 10);

		saturation = Math.max(0, Math.min(saturation, 1));
		value = Math.max(0, Math.min(value, 1));

		var rgb;
		if (saturation === 0) {
			return [
			Math.round(255 * value),
			Math.round(255 * value),
			Math.round(255 * value)
			];
		}

		var side = hue / 60;
		var chroma = value * saturation;
		var x = chroma * (1 - Math.abs(side % 2 - 1));
		var match = value - chroma;

		switch (Math.floor(side)) {
		case 0: rgb = [ chroma, x, 0 ]; break;
		case 1: rgb = [ x, chroma, 0 ]; break;
		case 2: rgb = [ 0, chroma, x ]; break;
		case 3: rgb = [ 0, x, chroma ]; break;
		case 4: rgb = [ x, 0, chroma ]; break;
		case 5: rgb = [ chroma, 0, x ]; break;
		default: rgb = [ 0, 0, 0 ];
		}

		rgb[0] = Math.round(255 * (rgb[0] + match));
		rgb[1] = Math.round(255 * (rgb[1] + match));
		rgb[2] = Math.round(255 * (rgb[2] + match));

		return rgb;
		}

		function rgbhsv (r, g, b) {
			var h, s, v
			var max = Math.max(r, g, b)
			var min = Math.min(r, g, b)
			var delta = max - min

			// hue
			if (delta === 0) {
				h = 0
			} else if (r === max) {
				h = ((g-b) / delta) % 6
			} else if (g === max) {
				h = (b-r) / delta + 2
			} else if (b === max) {
				h = (r-g) / delta + 4
			}

			h = round(h*60)
			if (h < 0) h += 360

			// saturation
			s = round((max === 0 ? 0 : (delta / max)) * 100)

			// value
			v = round(max/255*100)

			return [h, s, v]
		}

		function RGBToHSL(r,g,b) {
			// Make r, g, and b fractions of 1
			r /= 255;
			g /= 255;
			b /= 255;

			// Find greatest and smallest channel values
			let cmin = Math.min(r,g,b),
				cmax = Math.max(r,g,b),
				delta = cmax - cmin,
				h = 0,
				s = 0,
				l = 0;

			// Calculate hue
			// No difference
			if (delta == 0)
				h = 0;
			// Red is max
			else if (cmax == r)
				h = ((g - b) / delta) % 6;
			// Green is max
			else if (cmax == g)
				h = (b - r) / delta + 2;
			// Blue is max
			else
				h = (r - g) / delta + 4;

			h = Math.round(h * 60);
				
			// Make negative hues positive behind 360Â°
			if (h < 0)
				h += 360;

			// Calculate lightness
			l = (cmax + cmin) / 2;

			// Calculate saturation
			s = delta == 0 ? 0 : delta / (1 - Math.abs(2 * l - 1));
				
			// Multiply l and s by 100
			s = +(s * 100).toFixed(1);
			l = +(l * 100).toFixed(1);

				//return "hsl(" + h + "," + s + "%," + l + "%)";

				return [h, s, l]
		}

		function HSLToRGB(h,s,l) {
			// Must be fractions of 1
			s /= 100;
			l /= 100;

			let c = (1 - Math.abs(2 * l - 1)) * s,
			x = c * (1 - Math.abs((h / 60) % 2 - 1)),
			m = l - c/2,
			r = 0,
			g = 0,
			b = 0;

			if (0 <= h && h < 60) {
				r = c; g = x; b = 0;  
			} else if (60 <= h && h < 120) {
				r = x; g = c; b = 0;
			} else if (120 <= h && h < 180) {
				r = 0; g = c; b = x;
			} else if (180 <= h && h < 240) {
				r = 0; g = x; b = c;
			} else if (240 <= h && h < 300) {
				r = x; g = 0; b = c;
			} else if (300 <= h && h < 360) {
				r = c; g = 0; b = x;
			}
				r = Math.round((r + m) * 255);
				g = Math.round((g + m) * 255);
				b = Math.round((b + m) * 255);

			//return "rgb(" + r + "," + g + "," + b + ")";
			return [r, g, b]
		}

		document.body.innerHTML += '<div style="background:rgba(60, 120, 180, 1);width:1em;height:1em;"></div>';
		document.body.innerHTML += 'yiq[0.427, -0.216, 0.023] = rgb' + JSON.stringify(yiq2rgb(0.427, -0.216, 0.023).map(Math.round), null,2);
		document.body.innerHTML += '<br>rgb[60, 120, 180] = yiq' + JSON.stringify(rgb2yiq(60, 120, 180), null,2);

		document.body.innerHTML += '<br>HSV[60, 120, 180] = RGB' + JSON.stringify(hsb2rgb(60, 120, 180), null,2);
		document.body.innerHTML += '<br>RGB[255, 255, 0] = HSV' + JSON.stringify(rgbhsv(255, 255, 0), null,2);

		document.body.innerHTML += '<br>RGB[160, 255, 50] = HSL' + JSON.stringify(RGBToHSL(160, 255, 50), null,2);
		document.body.innerHTML += '<br>HSL[88, 59.80, 1o] = RGB' + JSON.stringify(HSLToRGB(88, 59.80, 10), null,2);
		</script>
	</body>

</html>